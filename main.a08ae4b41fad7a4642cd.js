!function(e){var t={};function r(s){if(t[s])return t[s].exports;var i=t[s]={i:s,l:!1,exports:{}};return e[s].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.m=e,r.c=t,r.d=function(e,t,s){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(r.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(s,i,function(t){return e[t]}.bind(null,i));return s},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=4)}([function(e,t,r){"use strict";function s(e,t){const r=document.createElement(e);return t.forEach(e=>{r.classList.add(e)}),r}r.d(t,"a",(function(){return s}))},function(e,t,r){"use strict";r.d(t,"c",(function(){return n})),r.d(t,"a",(function(){return a})),r.d(t,"b",(function(){return d}));const s=["января","февраля","марта","апреля","мая","июня","июля","августа","сентября","октября","ноября","декабря"],i=["вс","пн","вт","ср","чт","пт","сб"];function n(e){return`${e.getDate()}, ${i[e.getDay()]}`}function a(e){return`${e.getDate()} ${s[e.getMonth()]}, ${e.getFullYear()}`}function o(e){return e<10?"0"+e:e}function d(e){return e.getFullYear()+"-"+o(e.getMonth()+1)+"-"+o(e.getDate())}},function(e,t,r){"use strict";r.d(t,"a",(function(){return s})),r.d(t,"b",(function(){return i}));const s="9e16fa8cb67e41e39aba5e0b42032cf4",i="https://newsapi.org"},function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));var s=r(1);class i{constructor(e,t){this.url=e,this.token=t}load(e){const t=new Date,r=new Date(t.valueOf()-6048e5);return fetch(`${this.url}/v2/everything?q=${e}&language=ru&page=1`+`&from=${Object(s.b)(r)}&to=${Object(s.b)(t)}&pageSize=100&apiKey=${this.token}`).then(e=>e.ok?e.json():Promise.reject(`Ошибка: ${e.status}`)).catch(e=>{console.log(e)})}}class n{constructor(e,t){this.url=e,this.token=t,this.api=new i(e,t)}load(e){const t=localStorage.getItem(e);return t?Promise.resolve(JSON.parse(t)):this.api.load(e).then(t=>(localStorage.setItem(e,JSON.stringify(t)),t))}}},function(e,t,r){"use strict";r.r(t);r(5);var s=r(0),i=r(1),n=r(3),a=r(2);class o{constructor(e,t,r){this.input=r,t.addEventListener("submit",t=>{t.preventDefault(),""!==this.input.value&&e(r.value)})}}const d=document.querySelector("#form"),c=document.querySelector("#input"),l=new n.a(a.b,a.a);class u{constructor(e,t,r){this.preloader=e,this.preloaderLoading=e.querySelector(".preloader__loading"),this.preloaderResult=e.querySelector(".preloader__result"),this.cards=[],this.news=t,this.onLoadMoreClick=r,this.newsCards=t.querySelector(".news__cards"),this.button=t.querySelector("#moreButton"),t.querySelector("#moreButton").addEventListener("click",r)}addCard(e,t,r,s,i,n){const a=new h(e,t,r,s,i,n);this.cards.push(a),this.newsCards.appendChild(a.card)}addCards(e){this.preloaderLoading.classList.add("preloader__loading_hidden"),this.preloaderResult.classList.add("preloader__result_hidden"),this.news.classList.remove("news_hidden"),e.forEach(e=>{this.addCard(e.urlToImage,e.description,e.publishedAt,e.title,e.source.name,e.url)})}clear(){this.cards.forEach(e=>{this.newsCards.removeChild(e.card)}),this.cards=[]}showLoading(){this.preloaderLoading.classList.remove("preloader__loading_hidden"),this.preloaderResult.classList.add("preloader__result_hidden"),this.news.classList.add("news_hidden")}showEmpty(){this.preloaderLoading.classList.add("preloader__loading_hidden"),this.preloaderResult.classList.remove("preloader__result_hidden"),this.news.classList.add("news_hidden")}setMoreVisible(e){this.button.classList.toggle("news__button_hidden",!e)}}new class{constructor(e,t){this.onLoadMoreClick=this.onLoadMoreClick.bind(this),this.onSearch=this.onSearch.bind(this),this.news=e,this.preloader=t,this.cardRendered=0,this.InputForm=new o(this.onSearch,d,c),this.loadResult=new u(t,e,this.onLoadMoreClick),this.analyticsLink=document.querySelector("#analyticsLink")}onLoadMoreClick(){l.load(this.searchText).then(e=>{this.loadResult.addCards(e.articles.slice(this.cardRendered,this.cardRendered+3)),this.cardRendered+=3,this.loadResult.setMoreVisible(e.articles.length>this.cardRendered)})}onSearch(e){this.searchText=e,this.loadResult.showLoading(),l.load(e).then(t=>{localStorage.setItem(e,JSON.stringify(t)),this.showResult(t)})}showResult(e){this.analyticsLink.setAttribute("href",`./analytics.html?search=${encodeURIComponent(this.searchText)}`),0==e.articles.length?this.loadResult.showEmpty():(this.loadResult.clear(),this.loadResult.addCards(e.articles.slice(0,3)),this.cardRendered=3,this.loadResult.setMoreVisible(e.articles.length>this.cardRendered))}}(document.querySelector("#news"),document.querySelector("#preloader"));class h{constructor(e,t,r,s,i,n){this.urlToImage=e,this.description=t,this.publishedAt=r,this.title=s,this.sourceName=i,this.url=n,this.create()}create(){this.card=Object(s.a)("div",["card"]);const e=Object(s.a)("picture",[]),t=Object(s.a)("img",["card__image"]),r=Object(s.a)("div",["card__date"]),n=Object(s.a)("a",["card__title"]),a=Object(s.a)("p",["card__text"]),o=Object(s.a)("div",["card__source"]);t.setAttribute("src",this.urlToImage),n.setAttribute("href",this.url),n.setAttribute("target","_blank"),r.innerText=Object(i.a)(new Date(this.publishedAt)),n.innerText=this.title,a.innerText=this.description,o.innerText=this.sourceName,this.card.appendChild(e),e.appendChild(t),this.card.appendChild(r),this.card.appendChild(n),this.card.appendChild(a),this.card.appendChild(o)}}},function(e,t,r){}]);