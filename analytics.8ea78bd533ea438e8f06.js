!function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=6)}([function(t,e,n){"use strict";function r(t,e){const n=document.createElement(t);return e.forEach(t=>{n.classList.add(t)}),n}n.d(e,"a",(function(){return r}))},function(t,e,n){"use strict";n.d(e,"c",(function(){return c})),n.d(e,"a",(function(){return a})),n.d(e,"b",(function(){return s}));const r=["января","февраля","марта","апреля","мая","июня","июля","августа","сентября","октября","ноября","декабря"],o=["вс","пн","вт","ср","чт","пт","сб"];function c(t){return`${t.getDate()}, ${o[t.getDay()]}`}function a(t){return`${t.getDate()} ${r[t.getMonth()]}, ${t.getFullYear()}`}function i(t){return t<10?"0"+t:t}function s(t){return t.getFullYear()+"-"+i(t.getMonth()+1)+"-"+i(t.getDate())}},function(t,e,n){"use strict";n.d(e,"a",(function(){return r})),n.d(e,"b",(function(){return o}));const r="9e16fa8cb67e41e39aba5e0b42032cf4",o="https://newsapi.org"},function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var r=n(1);class o{constructor(t,e){this.url=t,this.token=e}load(t){const e=new Date,n=new Date(e.valueOf()-6048e5);return fetch(`${this.url}/v2/everything?q=${t}&language=ru&page=1`+`&from=${Object(r.b)(n)}&to=${Object(r.b)(e)}&pageSize=100&apiKey=${this.token}`).then(t=>t.ok?t.json():Promise.reject(`Ошибка: ${t.status}`)).catch(t=>{console.log(t)})}}class c{constructor(t,e){this.url=t,this.token=e,this.api=new o(t,e)}load(t){const e=localStorage.getItem(t);return e?Promise.resolve(JSON.parse(e)):this.api.load(t).then(e=>(localStorage.setItem(t,JSON.stringify(e)),e))}}},,,function(t,e,n){"use strict";n.r(e);n(7);var r=n(3),o=n(2),c=n(1),a=n(0);function i(t,e){let n=0;return t.toLowerCase().replace(new RegExp(e.toLowerCase(),"g"),()=>n++),n}const s=document.querySelector("#searchText"),u=document.querySelector(".chart"),l=new URL(location.href).searchParams.get("search"),h=document.querySelector("#totalInText"),f=document.querySelector("#totalOnWeek");new class{constructor(t,e,n,c,a){this.totalnText=c,this.totalOnWeek=a,this.searchTextPlaceholder=t,this.chart=e,this.searchText=n,this.api=new r.a(o.b,o.a),this.scale=e.querySelector(".chart__scale_bottom"),this.create()}create(){this.searchTextPlaceholder.innerText=this.searchText,this.api.load(this.searchText).then(t=>{const e=function(t,e){const n={};return t.forEach(t=>{const r=Object(c.b)(new Date(t.publishedAt));n[r]||(n[r]=0),n[r]+=i(t.title,e),n[r]+=i(t.description,e)}),Object.keys(n).sort((t,e)=>new Date(t)-new Date(e)).map(t=>({date:t,count:n[t]}))}(t.articles,this.searchText);let n=0;e.forEach(t=>{n+=t.count}),this.totalnText.innerText=n,this.totalOnWeek.innerText=t.articles.length,e.forEach(t=>{const e=Object(a.a)("div",["chart__content-date"]);e.innerText=Object(c.c)(new Date(t.date));const r=Object(a.a)("div",["chart__content-value"]),o=Object(a.a)("div",["chart__content-value-bar"]);r.appendChild(o),o.innerText=t.count,o.setAttribute("style",`width: ${t.count/n*100}%`),u.insertBefore(e,this.scale),u.insertBefore(r,this.scale)})})}}(s,u,l,h,f)},function(t,e,n){}]);